# ===== BOOTSTRAP: create CASS mapping tool =====
set -e

# 1) Folders (ordered)
mkdir -p cass-mapper/{backend/app,backend/tests,data/source_pdfs,docs,scripts,.github/workflows,frontend}

# 2) Requirements
cat > cass-mapper/requirements.txt <<'EOF'
fastapi==0.115.2
uvicorn[standard]==0.30.6
pydantic==2.9.2
pyyaml==6.0.2
pdfplumber==0.11.4
regex==2024.9.11
EOF

# 3) README
cat > cass-mapper/README.md <<'EOF'
# CASS Mapper (MVP)

**Not legal advice.** This tool helps map a firm's business profile to likely applicable CASS rules, related risks, and suggested controls, then builds a coverage matrix against the firm's existing controls.

## Quickstart
```bash
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt

# Put your PDFs here:
#   data/source_pdfs/ (e.g., "CASS 1 Application and general provisions.pdf")

# 1) Extract rules from PDFs -> data/rules.yaml
python scripts/extract_rules_from_pdf.py data/source_pdfs/*.pdf --out data/rules.yaml

# 2) Run API
uvicorn backend.app.main:app --reload

# Open http://127.0.0.1:8000/docs for endpoints
